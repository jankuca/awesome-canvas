function i(a){throw a;}var k=void 0,n=null,o,p=this;function q(){}
function r(a){var c=typeof a;if(c=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return c;var b=Object.prototype.toString.call(a);if(b=="[object Window]")return"object";if(b=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(b=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(c=="function"&&typeof a.call=="undefined")return"object";return c}function aa(a){var c=r(a);return c=="array"||c=="object"&&typeof a.length=="number"}function s(a){return typeof a=="string"}function ba(a){return r(a)=="function"}function ca(a){a=r(a);return a=="object"||a=="array"||a=="function"}var t="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),da=0,ea=Date.now||function(){return+new Date};function v(a,c){x.prototype[a]=c}
function fa(a,c){function b(){}b.prototype=c.prototype;a.ka=c.prototype;a.prototype=new b};function ga(a){if(!ha.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(ia,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(ja,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(ka,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(la,"&quot;"));return a}var ia=/&/g,ja=/</g,ka=/>/g,la=/\"/g,ha=/[&<>\"]/;
function ma(a,c){for(var b=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(c).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;b==0&&g<f;g++){var h=d[g]||"",j=e[g]||"",l=RegExp("(\\d*)(\\D*)","g"),A=RegExp("(\\d*)(\\D*)","g");do{var m=l.exec(h)||["","",""],w=A.exec(j)||["","",""];if(m[0].length==0&&w[0].length==0)break;b=na(m[1].length==0?0:parseInt(m[1],10),w[1].length==0?0:parseInt(w[1],10))||na(m[2].length==0,w[2].length==0)||na(m[2],w[2])}while(b==
0)}return b}function na(a,c){if(a<c)return-1;else if(a>c)return 1;return 0}var oa={};function pa(a){return oa[a]||(oa[a]=String(a).replace(/([A-Z])/g,"-$1").toLowerCase())};var y=Array.prototype,qa=y.indexOf?function(a,c,b){return y.indexOf.call(a,c,b)}:function(a,c,b){b=b==n?0:b<0?Math.max(0,a.length+b):b;if(s(a))return!s(c)||c.length!=1?-1:a.indexOf(c,b);for(;b<a.length;b++)if(b in a&&a[b]===c)return b;return-1},ra=y.forEach?function(a,c,b){y.forEach.call(a,c,b)}:function(a,c,b){for(var d=a.length,e=s(a)?a.split(""):a,f=0;f<d;f++)f in e&&c.call(b,e[f],f,a)};function sa(a){return y.concat.apply(y,arguments)}
function ta(a){if(r(a)=="array")return sa(a);else{for(var c=[],b=0,d=a.length;b<d;b++)c[b]=a[b];return c}}function ua(a,c,b,d){y.splice.apply(a,va(arguments,1))}function va(a,c,b){return arguments.length<=2?y.slice.call(a,c):y.slice.call(a,c,b)};var z,wa,xa,ya;function za(){return p.navigator?p.navigator.userAgent:n}ya=xa=wa=z=!1;var Aa;if(Aa=za()){var Ba=p.navigator;z=Aa.indexOf("Opera")==0;wa=!z&&Aa.indexOf("MSIE")!=-1;xa=!z&&Aa.indexOf("WebKit")!=-1;ya=!z&&!xa&&Ba.product=="Gecko"}var B=wa,Ca=ya,Da=xa,Ea=p.navigator,Fa=(Ea&&Ea.platform||"").indexOf("Mac")!=-1,Ga;
a:{var Ha="",C;if(z&&p.opera)var Ia=p.opera.version,Ha=typeof Ia=="function"?Ia():Ia;else if(Ca?C=/rv\:([^\);]+)(\)|;)/:B?C=/MSIE\s+([^\);]+)(\)|;)/:Da&&(C=/WebKit\/(\S+)/),C)var Ja=C.exec(za()),Ha=Ja?Ja[1]:"";if(B){var Ka,La=p.document;Ka=La?La.documentMode:k;if(Ka>parseFloat(Ha)){Ga=String(Ka);break a}}Ga=Ha}var Ma={};function D(a){return Ma[a]||(Ma[a]=ma(Ga,a)>=0)};var Na=!B||D("9");!Ca&&!B||B&&D("9")||Ca&&D("1.9.1");B&&D("9");function Oa(a){return(a=a.className)&&typeof a.split=="function"?a.split(/\s+/):[]}function E(a,c){var b=Oa(a),d=va(arguments,1),e;e=b;for(var f=0,g=0;g<d.length;g++)qa(e,d[g])>=0||(e.push(d[g]),f++);e=f==d.length;a.className=b.join(" ");return e}function F(a,c){for(var b=Oa(a),d=va(arguments,1),e=b,f=0,g=0;g<e.length;g++)qa(d,e[g])>=0&&(ua(e,g--,1),f++);a.className=b.join(" ")};function Pa(a,c){for(var b in a)c.call(k,a[b],b,a)}var Qa="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",");function Ra(a,c){for(var b,d,e=1;e<arguments.length;e++){d=arguments[e];for(b in d)a[b]=d[b];for(var f=0;f<Qa.length;f++)b=Qa[f],Object.prototype.hasOwnProperty.call(d,b)&&(a[b]=d[b])}};function Sa(a,c){Pa(c,function(b,c){c=="style"?a.style.cssText=b:c=="class"?a.className=b:c=="for"?a.htmlFor=b:c in Ta?a.setAttribute(Ta[c],b):a[c]=b})}var Ta={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function G(a,c,b){var d=arguments,e=document,f=d[0],g=d[1];if(!Na&&g&&(g.name||g.type)){f=["<",f];g.name&&f.push(' name="',ga(g.name),'"');if(g.type){f.push(' type="',ga(g.type),'"');var h={};Ra(h,g);g=h;delete g.type}f.push(">");f=f.join("")}f=e.createElement(f);if(g)s(g)?f.className=g:r(g)=="array"?E.apply(n,[f].concat(g)):Sa(f,g);d.length>2&&Ua(e,f,d);return f}
function Ua(a,c,b){function d(b){b&&c.appendChild(s(b)?a.createTextNode(b):b)}for(var e=2;e<b.length;e++){var f=b[e];aa(f)&&!(ca(f)&&f.nodeType>0)?ra(Va(f)?ta(f):f,d):d(f)}}function Wa(a,c){a.insertBefore(c,a.childNodes[0]||n)}function Xa(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function Va(a){if(a&&typeof a.length=="number")if(ca(a))return typeof a.item=="function"||typeof a.item=="string";else if(ba(a))return typeof a.item=="function";return!1};function H(a,c,b){a.dataset?a.dataset[c]=b:a.setAttribute("data-"+pa(c),b)}function I(a,c){return a.dataset?a.dataset[c]:a.getAttribute("data-"+pa(c))};var Ya;!B||D("9");var Za=B&&!D("8");function J(){}J.prototype.Ba=!1;J.prototype.T=function(){if(!this.Ba)this.Ba=!0,this.C()};J.prototype.C=function(){};function K(a,c){this.type=a;this.currentTarget=this.target=c}fa(K,J);K.prototype.C=function(){delete this.type;delete this.target;delete this.currentTarget};K.prototype.ja=!1;K.prototype.Ma=!0;K.prototype.preventDefault=function(){this.Ma=!1};var $a=new Function("a","return a");function L(a,c){a&&this.v(a,c)}fa(L,K);o=L.prototype;o.target=n;o.relatedTarget=n;o.offsetX=0;o.offsetY=0;o.clientX=0;o.clientY=0;o.screenX=0;o.screenY=0;o.button=0;o.keyCode=0;o.charCode=0;o.ctrlKey=!1;o.altKey=!1;o.shiftKey=!1;o.metaKey=!1;o.ib=!1;o.ea=n;
o.v=function(a,c){var b=this.type=a.type;K.call(this,b);this.target=a.target||a.srcElement;this.currentTarget=c;var d=a.relatedTarget;if(d){if(Ca)try{$a(d.nodeName)}catch(e){d=n}}else if(b=="mouseover")d=a.fromElement;else if(b=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==k?a.offsetX:a.layerX;this.offsetY=a.offsetY!==k?a.offsetY:a.layerY;this.clientX=a.clientX!==k?a.clientX:a.pageX;this.clientY=a.clientY!==k?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||
0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(b=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.ib=Fa?a.metaKey:a.ctrlKey;this.state=a.state;this.ea=a;delete this.Ma;delete this.ja};o.preventDefault=function(){L.ka.preventDefault.call(this);var a=this.ea;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Za)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(c){}};
o.C=function(){L.ka.C.call(this);this.relatedTarget=this.currentTarget=this.target=this.ea=n};function ab(){}var bb=0;o=ab.prototype;o.key=0;o.G=!1;o.wa=!1;o.v=function(a,c,b,d,e,f){ba(a)?this.Ga=!0:a&&a.handleEvent&&ba(a.handleEvent)?this.Ga=!1:i(Error("Invalid listener argument"));this.U=a;this.La=c;this.src=b;this.type=d;this.capture=!!e;this.Fa=f;this.wa=!1;this.key=++bb;this.G=!1};o.handleEvent=function(a){return this.Ga?this.U.call(this.Fa||this.src,a):this.U.handleEvent.call(this.U,a)};function M(a,c){this.Ja=c;this.u=[];a>this.Ja&&i(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var b=0;b<a;b++)this.u.push(this.L())}fa(M,J);o=M.prototype;o.t=n;o.Aa=n;o.getObject=function(){return this.u.length?this.u.pop():this.L()};function N(a,c){a.u.length<a.Ja?a.u.push(c):a.ba(c)}o.L=function(){return this.t?this.t():{}};o.ba=function(a){if(this.Aa)this.Aa(a);else if(ca(a))if(ba(a.T))a.T();else for(var c in a)delete a[c]};
o.C=function(){M.ka.C.call(this);for(var a=this.u;a.length;)this.ba(a.pop());delete this.u};var cb,db=(cb="ScriptEngine"in p&&p.ScriptEngine()=="JScript")?p.ScriptEngineMajorVersion()+"."+p.ScriptEngineMinorVersion()+"."+p.ScriptEngineBuildVersion():"0";var eb,fb,O,gb,hb,ib,jb,kb,lb,mb,nb;
(function(){function a(){return{f:0,F:0}}function c(){return[]}function b(){function a(b){return g.call(a.src,a.key,b)}return a}function d(){return new ab}function e(){return new L}var f=cb&&!(ma(db,"5.7")>=0),g;ib=function(a){g=a};if(f){eb=function(){return h.getObject()};fb=function(a){N(h,a)};O=function(){return j.getObject()};gb=function(a){N(j,a)};hb=function(){return l.getObject()};jb=function(){N(l,b())};kb=function(){return A.getObject()};lb=function(a){N(A,a)};mb=function(){return m.getObject()};
nb=function(a){N(m,a)};var h=new M(0,600);h.t=a;var j=new M(0,600);j.t=c;var l=new M(0,600);l.t=b;var A=new M(0,600);A.t=d;var m=new M(0,600);m.t=e}else eb=a,fb=q,O=c,gb=q,hb=b,jb=q,kb=d,lb=q,mb=e,nb=q})();var P={},Q={},R={},S={};
function T(a,c,b,d,e){if(c)if(r(c)=="array")for(var f=0;f<c.length;f++)T(a,c[f],b,d,e);else{var d=!!d,g=Q;c in g||(g[c]=eb());g=g[c];d in g||(g[d]=eb(),g.f++);var g=g[d],h=a[t]||(a[t]=++da),j;g.F++;if(g[h]){j=g[h];for(f=0;f<j.length;f++)if(g=j[f],g.U==b&&g.Fa==e){if(g.G)break;return}}else j=g[h]=O(),g.f++;f=hb();f.src=a;g=kb();g.v(b,f,a,c,d,e);b=g.key;f.key=b;j.push(g);P[b]=g;R[h]||(R[h]=O());R[h].push(g);a.addEventListener?(a==p||!a.$a)&&a.addEventListener(c,f,d):a.attachEvent(c in S?S[c]:S[c]="on"+
c,f)}else i(Error("Invalid event type"))}function ob(a,c,b,d){if(!d.V&&d.Ka){for(var e=0,f=0;e<d.length;e++)if(d[e].G){var g=d[e].La;g.src=n;jb(g);lb(d[e])}else e!=f&&(d[f]=d[e]),f++;d.length=f;d.Ka=!1;f==0&&(gb(d),delete Q[a][c][b],Q[a][c].f--,Q[a][c].f==0&&(fb(Q[a][c]),delete Q[a][c],Q[a].f--),Q[a].f==0&&(fb(Q[a]),delete Q[a]))}}
function pb(a,c,b,d,e){var f=1,c=c[t]||(c[t]=++da);if(a[c]){a.F--;a=a[c];a.V?a.V++:a.V=1;try{for(var g=a.length,h=0;h<g;h++){var j=a[h];j&&!j.G&&(f&=qb(j,e)!==!1)}}finally{a.V--,ob(b,d,c,a)}}return Boolean(f)}
function qb(a,c){var b=a.handleEvent(c);if(a.wa){var d=a.key;if(P[d]){var e=P[d];if(!e.G){var f=e.src,g=e.type,h=e.La,j=e.capture;f.removeEventListener?(f==p||!f.$a)&&f.removeEventListener(g,h,j):f.detachEvent&&f.detachEvent(g in S?S[g]:S[g]="on"+g,h);f=f[t]||(f[t]=++da);h=Q[g][j][f];if(R[f]){var l=R[f],A=qa(l,e);A>=0&&y.splice.call(l,A,1);l.length==0&&delete R[f]}e.G=!0;h.Ka=!0;ob(g,j,f,h);delete P[d]}}}return b}
ib(function(a,c){if(!P[a])return!0;var b=P[a],d=b.type,e=Q;if(!(d in e))return!0;var e=e[d],f,g;Ya===k&&(Ya=B&&!p.addEventListener);if(Ya){var h;if(!(h=c))a:{h="window.event".split(".");for(var j=p;f=h.shift();)if(j[f]!=n)j=j[f];else{h=n;break a}h=j}f=h;h=!0 in e;j=!1 in e;if(h){if(f.keyCode<0||f.returnValue!=k)return!0;a:{var l=!1;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(A){l=!0}if(l||f.returnValue==k)f.returnValue=!0}}l=mb();l.v(f,this);f=!0;try{if(h){for(var m=O(),w=l.currentTarget;w;w=w.parentNode)m.push(w);
g=e[!0];g.F=g.f;for(var u=m.length-1;!l.ja&&u>=0&&g.F;u--)l.currentTarget=m[u],f&=pb(g,m[u],d,!0,l);if(j){g=e[!1];g.F=g.f;for(u=0;!l.ja&&u<m.length&&g.F;u++)l.currentTarget=m[u],f&=pb(g,m[u],d,!1,l)}}else f=qb(b,l)}finally{if(m)m.length=0,gb(m);l.T();nb(l)}return f}d=new L(c,this);try{f=qb(b,d)}finally{d.T()}return f});new M(0,100);var U="StopIteration"in p?p.StopIteration:Error("StopIteration");function V(){}V.prototype.next=function(){i(U)};V.prototype.X=function(){return this};function rb(a){if(a instanceof V)return a;if(typeof a.X=="function")return a.X(!1);if(aa(a)){var c=0,b=new V;b.next=function(){for(;;)if(c>=a.length&&i(U),c in a)return a[c++];else c++};return b}i(Error("Not implemented"))}
function sb(a,c){if(aa(a))try{ra(a,c,k)}catch(b){b!==U&&i(b)}else{a=rb(a);try{for(;;)c.call(k,a.next(),k,a)}catch(d){d!==U&&i(d)}}};function tb(a,c){this.q={};this.d=[];var b=arguments.length;if(b>1){b%2&&i(Error("Uneven number of arguments"));for(var d=0;d<b;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){var e;if(a instanceof tb){d=ub(a);vb(a);e=[];for(b=0;b<a.d.length;b++)e.push(a.q[a.d[b]])}else{var b=[],f=0;for(d in a)b[f++]=d;d=b;b=[];f=0;for(e in a)b[f++]=a[e];e=b}for(b=0;b<d.length;b++)this.set(d[b],e[b])}}o=tb.prototype;o.f=0;o.W=0;function ub(a){vb(a);return a.d.concat()}
o.clear=function(){this.q={};this.W=this.f=this.d.length=0};function vb(a){if(a.f!=a.d.length){for(var c=0,b=0;c<a.d.length;){var d=a.d[c];Object.prototype.hasOwnProperty.call(a.q,d)&&(a.d[b++]=d);c++}a.d.length=b}if(a.f!=a.d.length){for(var e={},b=c=0;c<a.d.length;)d=a.d[c],Object.prototype.hasOwnProperty.call(e,d)||(a.d[b++]=d,e[d]=1),c++;a.d.length=b}}o.get=function(a,c){return Object.prototype.hasOwnProperty.call(this.q,a)?this.q[a]:c};
o.set=function(a,c){Object.prototype.hasOwnProperty.call(this.q,a)||(this.f++,this.d.push(a),this.W++);this.q[a]=c};o.X=function(a){vb(this);var c=0,b=this.d,d=this.q,e=this.W,f=this,g=new V;g.next=function(){for(;;){e!=f.W&&i(Error("The map has changed since the iterator was created"));c>=b.length&&i(U);var g=b[c++];return a?g:d[g]}};return g};function wb(){this.N=[];this.ia=new tb;this.Ta=this.Ua=this.Va=this.Oa=0;this.Q=new tb;this.xa=this.Sa=0;this.hb=1;this.ca=new M(0,4E3);this.ca.L=function(){return new xb};this.Pa=new M(0,50);this.Pa.L=function(){return new yb};var a=this;this.ga=new M(0,2E3);this.ga.L=function(){return String(a.hb++)};this.ga.ba=function(){};this.ab=3}function yb(){this.qa=this.Ra=this.count=0}
yb.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(this.Ra*10)/10," ms)");this.qa&&a.push(" [VarAlloc = ",this.qa,"]");return a.join("")};function xb(){}function zb(a,c,b,d){var e=[];b==-1?e.push("    "):e.push(Ab(a.Da-b));e.push(" ",Bb(a.Da-c));a.da==0?e.push(" Start        "):a.da==1?(e.push(" Done "),e.push(Ab(a.pb-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);a.lb>0&&e.push("[VarAlloc ",a.lb,"] ");return e.join("")}
xb.prototype.toString=function(){return this.type==n?this.Za:"["+this.type+"] "+this.Za};wb.prototype.reset=function(a){this.ab=a;for(a=0;a<this.N.length;a++){var c=this.ca.id;c&&N(this.ga,c);N(this.ca,this.N[a])}this.N.length=0;this.ia.clear();this.Oa=ea();this.xa=this.Sa=this.Ta=this.Ua=this.Va=0;c=ub(this.Q);for(a=0;a<c.length;a++){var b=this.Q.get(c[a]);b.count=0;b.Ra=0;b.qa=0;N(this.Pa,b)}this.Q.clear()};
wb.prototype.toString=function(){for(var a=[],c=-1,b=[],d=0;d<this.N.length;d++){var e=this.N[d];e.da==1&&b.pop();a.push(" ",zb(e,this.Oa,c,b.join("")));c=e.Da;a.push("\n");e.da==0&&b.push("|  ")}if(this.ia.f!=0){var f=ea();a.push(" Unstopped timers:\n");sb(this.ia,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",Bb(b.startTime),")\n")})}c=ub(this.Q);for(d=0;d<c.length;d++)b=this.Q.get(c[d]),b.count>1&&a.push(" TOTAL ",b,"\n");a.push("Total tracers created ",this.Sa,"\n","Total comments created ",
this.xa,"\n","Overhead start: ",this.Va," ms\n","Overhead end: ",this.Ua," ms\n","Overhead comment: ",this.Ta," ms\n");return a.join("")};function Ab(a){var a=Math.round(a),c="";a<1E3&&(c=" ");a<100&&(c="  ");a<10&&(c="   ");return c+a}function Bb(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new wb;var X={brush:{mode:"source-over",cursor:"crosshair",size:2,h:{w:function(a,c,b){if(c.button===0)b.fillStyle="rgba("+a.m.join(",")+","+a.fa().pressure+")",b.lineWidth=a.D(),b.beginPath(),b.arc(c.x,c.y,b.lineWidth/2,0,Math.PI*2,!1),b.closePath(),b.fill(),a.M=c},z:function(a,c,b){var d=a.M;if(W&&c.button===0&&d)b.strokeStyle="rgba("+a.m.join(",")+","+a.fa().pressure+")",b.beginPath(),b.moveTo(d.x,d.y),b.lineTo(c.x,c.y),b.closePath(),b.stroke(),a.M=c}}},line:{mode:"source-over",cursor:"crosshair",size:n,
h:{w:function(a,c){if(c.button===0){var b=X[a.b];b.o=!0;b.r=c}},z:function(a,c){if(W&&c.button===0){var b=X[a.b].r,d=a.n.c;a.n.canvas.reset();d.strokeStyle="rgb("+a.m.join(",")+")";d.beginPath();d.moveTo(b.x,b.y);d.lineTo(c.x,c.y);d.closePath();d.stroke()}},P:function(a,c,b){var d=X[a.b];if(d.o)d.o=!1,d=d.r,a.n.canvas.reset(),b.strokeStyle="rgb("+a.m.join(",")+")",b.lineWidth=a.D(),b.beginPath(),b.moveTo(d.x,d.y),b.lineTo(c.x,c.y),b.closePath(),b.stroke()}}},rectangle:{mode:"source-over",lineCap:"butt",
lineJoin:"miter",cursor:"crosshair",size:n,filled:!0,h:{w:function(a,c){if(c.button===0){var b=X[a.b];b.o=!0;b.r=c}},z:function(a,c){if(W&&c.button===0){var b=X[a.b].r,d=c.altKey,e=a.n.canvas,f=a.n.c,g=c.y-b.y,h=c.x-b.x;c.shiftKey&&(h=h>0?Math.abs(g):-Math.abs(g));e.reset();f.strokeStyle="rgb("+a.m.join(",")+")";f.beginPath();f.rect(!d?b.x:b.x-h,!d?b.y:b.y-g,!d?h:2*h,!d?g:2*g);f.closePath();f.stroke()}},P:function(a,c,b){var d=X[a.b];if(d.o){d.o=!1;var d=d.r,e=c.altKey,f=a.n.canvas,g=c.y-d.y,h=c.x-
d.x,j=a.D();c.shiftKey&&(h=h>0?Math.abs(g):-Math.abs(g));f.reset();b.strokeStyle="rgb("+a.m.join(",")+")";b.lineWidth=j;b.beginPath();b.rect((!e?d.x:d.x-h)+(h>0?j/2:-j/2),(!e?d.y:d.y-g)+(g>0?j/2:-j/2),(!e?h:2*h)-(h>0?j:-j),(!e?g:2*g)-(g>0?j:-j));b.closePath();b.stroke()}}}},ellipse:{mode:"source-over",cursor:"crosshair",size:n,filled:!0,h:{w:function(a,c){if(c.button===0){var b=X[a.b];b.o=!0;b.r=c}},z:function(a,c){if(W&&c.button===0){var b=X[a.b].r,d=c.altKey,e=a.n.canvas,f=a.n.c,g=c.y-b.y,h=c.x-
b.x;c.shiftKey&&(h=h>0?Math.abs(g):-Math.abs(g));e.reset();f.strokeStyle="rgb("+a.m.join(",")+")";f.beginPath();f.Ca(!d?b.x:b.x-h,!d?b.y:b.y-g,!d?h:2*h,!d?g:2*g);f.closePath();f.stroke()}},P:function(a,c,b){var d=X[a.b];if(d.o){d.o=!1;var d=d.r,e=c.altKey,f=a.n.canvas,g=c.y-d.y,h=c.x-d.x;c.shiftKey&&(h=h>0?Math.abs(g):-Math.abs(g));f.reset();b.strokeStyle="rgb("+a.m.join(",")+")";b.lineWidth=a.D();b.beginPath();b.Ca(!e?d.x:d.x-h,!e?d.y:d.y-g,!e?h:2*h,!e?g:2*g);b.closePath();b.stroke()}}}},eraser:{mode:"destination-out",
cursor:"crosshair",size:20,fb:!1,h:{focus:function(){},w:function(a,c,b){if(c.button===0)b.lineWidth=a.D(),b.beginPath(),b.arc(c.x,c.y,b.lineWidth/2,0,Math.PI*2,!1),b.closePath(),b.fill(),a.Ha=c},z:function(a,c,b){if(W&&c.button===0){var d=a.Ha;b.beginPath();b.moveTo(d.x,d.y);b.lineTo(c.x,c.y);b.closePath();b.stroke();a.Ha=c}}}},marquee:{mode:"source-over",cursor:"crosshair",size:!1,l:0,h:{v:function(a){var c;c=G("canvas",{width:a.a.clientWidth,height:a.a.clientHeight,transparent:"true","class":"selections"});
a.a.appendChild(c);a.H={canvas:c,c:c.getContext("2d")};c=G("canvas",{width:a.a.clientWidth,height:a.a.clientHeight,transparent:"true","class":"selection-content"});a.a.appendChild(c);a.A={canvas:c,c:c.getContext("2d")}},blur:function(a,c){var b=X[a.b],d=a.A.canvas,e=a.H.canvas;if(b.R){var f=d.toDataURL(),g=new Image;g.onload=function(){c.globalCompositeOperation=b.mode;c.drawImage(a,0,0)};g.src=f;b.l=0;b.R=!1}d.reset();e.reset();b.e=k},w:function(a,c,b){var d=X[a.b];if(d.l==2){var e=a.A.canvas,f=
a.A.c,a=a.H.canvas,g=d.e;if(Cb(c.x,c.y,g)){if(!d.R)d.Y=b.getImageData.apply(b,g),d.nb=[c.x-g[0]+0.5,c.y-g[1]+0.5],f.putImageData(d.Y,g[0],g[1]),b.globalCompositeOperation="destination-out",b.beginPath(),b.rect.apply(b,g),b.closePath(),b.fill();d.l=3;d.K=c;d.J=c;return}else f=e.toDataURL(),e.reset(),a.reset(),e=new Image,e.onload=function(){b.globalCompositeOperation=d.mode;b.drawImage(this,0,0)},e.src=f,d.l=0,d.R=!1}d.l=1;d.K=c;d.e=[c.x+0.5,c.y+0.5,0,0]},z:function(a,c){var b=X[a.b],d;switch(b.l){case 1:d=
[c.x-b.K.x,c.y-b.K.y];b.e[2]=d[0];b.e[3]=d[1];break;case 3:d=[c.x-b.J.x,c.y-b.J.y];b.e[0]+=d[0];b.e[1]+=d[1];var e=a.A.canvas,f=a.A.c;d=b.e;e.reset();f.putImageData(b.Y,d[0],d[1]);b.J=c}e=a.H.canvas;f=a.H.c;d=b.e;e.reset();f.beginPath();f.rect.apply(f,d);f.closePath();f.stroke()},P:function(a,c){var b=X[a.b],d;switch(b.l){case 1:d=[c.x-b.K.x,c.y-b.K.y];if(d[0]===0||d[1]===0){b.e=k;break}b.e[2]=d[0];b.e[3]=d[1];var e=a.H.canvas,f=a.H.c;d=b.e;e.reset();f.beginPath();f.rect.apply(f,d);f.closePath();
f.stroke();b.l=2;break;case 3:d=[c.x-b.J.x,c.y-b.J.y],b.e[0]+=d[0],b.e[1]+=d[1],e=a.A.canvas,f=a.A.c,d=b.e,e.reset(),f.putImageData(b.Y,d[0],d[1]),b.l=2,b.R=!0}}}}};var Y={grid:{ta:!1,ra:function(a){a.O.canvas.style.display="block"},ya:function(a){a.O.canvas.style.display="none"}},"wacom-plugin":{ta:!0,ra:function(){Db=!0},ya:function(){Db=!1}}};function x(a,c){this.j={s:"#FFFFFF",gb:"rgba(0, 0, 0, 0.05)",Ea:20,bb:"#000000",aa:"brush"};this.kb="brush,eraser,line,rectangle,ellipse,marquee".split(",");this.jb=["#000000","#FFFFFF","#FF0000","#00FF00","#0000FF"];this.mb={pressure:1};this.S=a;c&&Object.keys(c).forEach(function(a){this.j[a]=c[a]},this)}o=x.prototype;
o.eb=function(a){var c=this.a.clientWidth,b=this.a.clientHeight,d=this.i,e=d.length,f=G("canvas",{width:c,height:b}),g=f.getContext("2d"),h=[],j=[],l=0;d.forEach(function(d,m){if(d.s)g.fillStyle=d.s,g.fillRect(0,0,c,b),h[m]={color:d.s};else{var w=d.canvas.toDataURL(),u=new Image;u.src=w;u.ob=m;u.onload=function(){j[m]=u;h[m]={data:w};for(var b;b=j[l+1];)g.drawImage(b,0,0),l+=1;l+1===e&&(h.unshift({data:f.toDataURL()}),a(h))}}})};
o.ua=function(a){var c=this.j.Ea,b=a[0],a=a[1],d=b%c,e=a%c;d<c/2?e<c/2?(b-=d,a-=e):(b-=d,a+=c-e):e<c/2?(b+=c-d,a-=e):(b+=c-d,a+=c-e);return[b,a]};
o.Ya=function(){this.S.innerHTML="";Eb(this);this.a=G("div",{"class":"area"});this.S.appendChild(this.a);this.toolbar=G("div",{"class":"sidebar"});Wa(this.S,this.toolbar);Fb(this);Gb(this);this.sidebar=G("div",{"class":"sidebar"});this.S.appendChild(this.sidebar);Hb(this);Ib(this);this.options={};this.ha=G("div",{"class":"options"});this.sidebar.appendChild(this.ha);var a=G("ul");this.ha.appendChild(a);var c=Jb(this);a.appendChild(c);this.i=[];Kb(this);a=G("canvas",{width:this.a.clientWidth,height:this.a.clientHeight,
transparent:"true","class":"grid"});Wa(this.a,a);this.O={canvas:a,c:a.getContext("2d")};var a=this.O.c,c=this.j.Ea,b=this.O.canvas.width,d=this.O.canvas.height;a.lineWidth=2;a.strokeStyle=this.j.gb;a.beginPath();for(var e=0;0<=b?e<b:e>b;0<=b?e+=1:e-=1)e%c===0&&(a.moveTo(e,0),a.lineTo(e,d));for(e=0;0<=d?e<d:e>d;0<=d?e+=1:e-=1)e%c===0&&(a.moveTo(0,e),a.lineTo(b,e));a.closePath();a.stroke();a=G("canvas",{width:this.a.clientWidth,height:this.a.clientHeight,transparent:"true","class":"temp"});this.a.appendChild(a);
this.n={canvas:a,c:a.getContext("2d")};Lb(this);Mb(this);Nb(this);this.Z(this.j.bb);this.$(this.j.aa)};function Fb(a){a.pa=G("ul",{"class":"tools"});a.toolbar.appendChild(a.pa);T(a.pa,"click",function(a){a=a.target;a.tagName==="LI"&&this.$(I(a,"tool"))},!1,a);Ob(a)}function Gb(a){a.ma=G("ul",{"class":"toggles"});a.toolbar.appendChild(a.ma);T(a.ma,"click",function(a){a=a.target;a.tagName==="LI"&&this.toggle(I(a,"toggle"))},!1,a);Pb(a)}
function Hb(a){a.Qa=G("div",{"class":"swatches"});a.sidebar.appendChild(a.Qa);var c=G("ul");a.Qa.appendChild(c);for(var b=a.jb,d=0,e=b.length;d<e;++d){var f=G("li");f.style.backgroundColor=b[d];H(f,"color",b[d]);c.appendChild(f)}T(c,"click",function(a){a=a.target;a.tagName==="LI"&&this.Z(I(a,"color"))},!1,a)}
function Ib(a){a.k=G("div",{"class":"layers"});a.sidebar.appendChild(a.k);var c=G("ul");a.k.appendChild(c);T(c,"click",function(a){a=a.target;switch(a.tagName){case "LI":this.B(I(a,"index"));break;case "SPAN":qa(Oa(a),"lock")>=0&&(a=I(a.parentNode,"index"),this.i[a].p?this.Wa(a):this.Ia(a))}},!1,a);Qb(a)}
function Qb(a){var c=G("ul",{"class":"toolbar"});a.k.appendChild(c);var b=G("li",{"class":"create"});b.setAttribute("title","New layer");T(b,"click",function(){Lb(this)},!1,a);c.appendChild(b);b=G("li",{"class":"delete"});b.setAttribute("title","Delete layer");T(b,"click",function(){this.za()},!1,a);c.appendChild(b)}
function Jb(a){var c=G("li",{"class":"size"}),b=G("input",{type:"range",min:2,max:50,value:1});c.appendChild(b);Object.defineProperty(a.options,"size",{get:function(){return b.value}});T(b,"change",function(){this.Na(b.value)},!1,a);return c}function Ob(a){a.oa={};var c=X||{};a.kb.forEach(function(a){var d=c[a],e=G("li",{title:d.title});H(e,"tool",a);this.pa.appendChild(e);this.oa[a]=e;d.h&&typeof d.h.v==="function"&&d.h.v.call(d,this,e,n)},a)}
function Pb(a){a.na={};a.la={};Object.keys(Y||{}).forEach(function(a){var b=G("li",{title:Y[a].title});H(b,"toggle",a);this.ma.appendChild(b);this.la[a]=b},a)}function Mb(a){Object.keys(Y||{}).forEach(function(a){this.toggle(a,Y[a].ta)},a)}
function Kb(a){a.a.style.backgroundColor=a.j.s;var c={s:a.j.s};c.index=-1+a.i.push(c);a.va=c;var b=Rb(a);H(b,"index",c.index);E(b,"background");b.querySelector(".title").innerHTML="Background layer";T(b,"mouseover",function(){a.cb&&!a.va.p&&E(this,"swatch-change")});T(b,"mouseout",function(){a.cb&&!a.va.p&&F(this,"swatch-change")});c=G("span",{"class":"swatch"});c.style.backgroundColor=a.j.s;b.appendChild(c)}
function Lb(a){var c=G("canvas",{width:a.a.clientWidth,height:a.a.clientHeight,transparent:"true"}),b=a.a.querySelector(".selection-content");b?b.parentNode&&b.parentNode.insertBefore(c,b):a.a.appendChild(c);c={canvas:c,c:c.getContext("2d")};c.index=-1+a.i.push(c);b=Rb(a);b.querySelector(".title").innerHTML="New layer";H(b,"index",c.index);a.B(c.index)}
function Rb(a){var c=G("li");Wa(a.k.querySelector("ul"),c);a=G("span",{"class":"title"});c.appendChild(a);a=G("span",{"class":"lock"});c.appendChild(a);return c}
function Nb(a){T(a.a,"mousedown",function(c){c.preventDefault();W=!0;if(this.g.p||a.g.canvas===k)return this.a.style.cursor="not-allowed",!1;Sb=!0;var c=Tb(this,c),b=X[this.b];typeof a.I.w==="function"&&this.I.w.call(b,this,c,this.g.c);this.M=c;return!1},!1,a);T(a.a,"mouseup",function(a){if(W){W=!1;var b=X[this.b];if(this.g.p)this.a.style.cursor=b.cursor||"default";a=Tb(this,a);typeof this.I.P==="function"&&this.I.P.call(b,this,a,this.g.c);this.M=a}},!1,a);T(window,"mousemove",function(a){if(W&&!this.g.p)Sb&&
a.preventDefault(),a=Tb(this,a),typeof this.I.z==="function"&&this.I.z.call(this.b,this,a,this.g.c),this.M=a},!1,a)}
function Tb(a,c){var b,d=b=0,e=a.a,f=n;do f=window.getComputedStyle(e,n),b+=e.offsetLeft-e.scrollLeft+parseInt(f.borderLeftWidth,10),d+=e.offsetTop-e.scrollTop+parseInt(f.borderTopWidth,10);while(e=e.offsetParent);b=[b,d];b=[c.clientX+window.scrollX-b[0],c.clientY+window.scrollY-b[1]];d=X[a.b];a.na.grid&&d.fb!==!1&&(b=a.ua(b));return{x:b[0],y:b[1],button:c.button,ctrlKey:c.ctrlKey,altKey:c.altKey,shiftKey:c.shiftKey}}
o.B=function(a){var c=this.i[a];c||i(Error("Undefined layer"));if(this.g){var b=this.k.querySelector('li[data-index="'+this.g.index+'"]');b!==n&&F(b,"active")}this.g=c;E(this.k.querySelector('li[data-index="'+a+'"]'),"active");Ub(this)};o.sa=function(a){for(var c=this.i.length-1,b;b===k&&++a<=c;)b=this.i[a];if(b!==k)this.B(a);else{for(;b===k&&--a>=0;)b=this.i[a];b!==k&&this.B(a)}};
function Ub(a){var c=a.g;if(a.b&&c&&c.canvas)a=X[a.b],c=c.c,c.globalCompositeOperation=a.mode||"source-over",c.lineWidth=a.size||1,c.lineCap=a.lineCap||"round"}o.Ia=function(a){var c=this.i[a];c||i(Error("Undefined layer"));c.p=!0;E(this.k.querySelector('li[data-index="'+a+'"]'),"locked")};o.Wa=function(a){var c=this.i[a];c||i(Error("Undefined layer"));c.p=!1;F(this.k.querySelector('li[data-index="'+a+'"]'),"locked")};
o.za=function(){var a=this.g;a||i(Error("Undefined layer"));a.p||(Xa(a.canvas),Xa(this.k.querySelector('li[data-index="'+a.index+'"]')),delete this.i[a.index],this.sa(a.index),this.g||this.B(Number(I(this.k.querySelector("li:last-child"),"index"))||0))};
o.$=function(a){var c=X[a];c||i(Error('Undefined tool "'+a+'"'));var b=this.b;b&&(F(this.oa[b],"active"),b=X[b],typeof b.h.blur==="function"&&b.h.blur.call(b,this,this.g.c));this.b=a;this.I=c.h||{};this.a.style.cursor=c.cursor||"default";E(this.oa[a],"active");typeof c.h.focus==="function"&&c.h.focus.call(c,this);a=X[this.b].size;if(a===n)a=X[this.j.aa].size;c=this.ha.querySelector(".size input");a===!1?c.disabled=!0:(c.disabled=!1,c.value=a);Ub(this)};
o.Z=function(a){if(Array.isArray(a))this.m=a;else if(typeof a==="string")a=a.charAt(0)==="#"?a.substring(1,7):a,this.m=[parseInt(a.substring(0,2),16),parseInt(a.substring(2,4),16),parseInt(a.substring(4,6),16)]};o.toggle=function(a,c){var b=Y[a];b||i(Error('Undefined toggle ("'+a+'")'));var d=typeof c!=="undefined"?Boolean(c):!this.na[a];(this.na[a]=d)?(b.ra.call(b,this),E(this.la[a],"active")):(b.ya.call(b,this),F(this.la[a],"active"))};
o.D=function(){var a=X[this.b].size;return a===n?X[this.j.aa].size:a};o.Na=function(a){var c=X[this.b];if(c.size!==!1)c.size=Number(a)};o.fa=function(){var a=this.Xa;return!Db||!a.isWacom||a.pointerType===0?this.mb:a};
function Eb(a){var c=document.getElementById("wacom-plugin");a.Xa=c;if(!c)c=G("embed",{id:"wacom-plugin",type:"application/x-wacom-tablet",hidden:!0,pluginspage:"http://www.wacom.com/productsupport/plugin.php",style:"display: none"}),a.Xa=c,document.body.appendChild(c),T(window,"focus",function(){Xa(c);document.body.appendChild(c)})}var W=!1,Db=!0,Sb;v("build",x.prototype.Ya);v("getState",x.prototype.eb);
function Cb(a,c,b){var d=!1;if(!b)return d;b[2]<0&&(b[0]+=b[2],b[2]=-b[2]);b[3]<0&&(b[1]+=b[3],b[3]=-b[3]);a>=b[0]-1&&a<=b[0]+b[2]&&c>=b[1]-1&&c<=b[1]+b[3]&&(d=!0);return d}HTMLCanvasElement.prototype.reset=function(){this.width=this.width};
CanvasRenderingContext2D.prototype.Ca=function(a,c,b,d){var e,f,g,h;g=b/2*0.5522848;h=d/2*0.5522848;e=a+b;f=c+d;b=a+b/2;d=c+d/2;this.moveTo(a,d);this.bezierCurveTo(a,d-h,b-g,c,b,c);this.bezierCurveTo(b+g,c,e,d-h,e,d);this.bezierCurveTo(e,d+h,b+g,f,b,f);this.bezierCurveTo(b-g,f,a,d+h,a,d)};var Vb=x,Z="awesomeCanvas.Editor".split("."),$=p;!(Z[0]in $)&&$.execScript&&$.execScript("var "+Z[0]);for(var Wb;Z.length&&(Wb=Z.shift());)!Z.length&&Vb!==k?$[Wb]=Vb:$=$[Wb]?$[Wb]:$[Wb]={};v("applyGridToCoords",x.prototype.ua);v("activateLayer",x.prototype.B);v("activateNearestLayer",x.prototype.sa);v("lockLayer",x.prototype.Ia);v("unlockLayer",x.prototype.Wa);v("deleteActiveLayer",x.prototype.za);v("activateTool",x.prototype.$);v("activateSwatch",x.prototype.Z);v("toggle",x.prototype.toggle);
v("getActiveToolSize",x.prototype.D);v("setActiveToolSize",x.prototype.Na);v("getWacomPlugin",x.prototype.fa);
